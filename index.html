<head>
  <style>
    .canvasLine {
      margin: 0 auto;
      width: 320;
      height: 320;
    }
  </style>
</head>

<body>
  <canvas id="canvasLine"></canvas>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script>
    var yAxis = [];
    var datas = [];
    var ctx = document.getElementById('canvasLine').getContext('2d');
    var lineChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: yAxis,
        datasets: [{
          label: '票數',
          data: datas,
          backgroundColor: "rgba(0,148,255,0.6)"
        }]
      }
    });

    //TODO Get my own scp page's data
    window.onload = function () {
      yAxis.push("first");
      yAxis.push("second");
      datas.push(Math.floor(Math.random() * 100) + 1);
      datas.push(Math.floor(Math.random() * 100) + 1);
    }

    function appendData() {
      //超過10 個，就把最早進來的刪掉
      if (yAxis.length > 10) {
        yAxis.shift();
        datas.shift();
      }

      //推入y 軸新的資料 
      yAxis.push(new moment().format(timeFormat));

      //推入一筆亂數進資料
      datas.push(Math.floor(Math.random() * 100) + 1);

      //更新線圖
      lineChart.update();
    }
  </script>